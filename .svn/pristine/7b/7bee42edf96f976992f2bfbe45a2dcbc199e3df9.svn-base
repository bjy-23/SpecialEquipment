package com.wondersgroup.special.activity;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.RelativeLayout;
import android.widget.TextView;

import com.google.gson.Gson;
import com.google.gson.JsonParser;
import com.wondersgroup.special.R;
import com.wondersgroup.special.constant.Constant;
import com.wondersgroup.special.constant.Params;
import com.wondersgroup.special.entity.EmployListResult;

import java.util.Iterator;
import java.util.LinkedHashMap;

public class EmploymentDetailActivity extends BaseActivity {
    private TextView mEmploymentName, mIdCode, mTheNo, mEmploymentUnit;
    private EmployListResult.EmployList result;
    private RelativeLayout mRelativeChangeRecord, mRelativeCertInfo, mRelativeWorkCert, mRelativeCheckCert;
    private String employType;

    @Override
    protected void initView() {
        setContentView(R.layout.activity_employment_detail);
        mTitle.setText("人员详情");
        mEmploymentName = (TextView) findViewById(R.id.employment_name);
        mIdCode = (TextView) findViewById(R.id.id_code);
        mTheNo = (TextView) findViewById(R.id.the_no);
        mEmploymentUnit = (TextView) findViewById(R.id.employment_unit);
        mRelativeChangeRecord = (RelativeLayout) findViewById(R.id.relative_change_record);
        mRelativeCertInfo = (RelativeLayout) findViewById(R.id.relative_cert_info);
        mRelativeWorkCert = (RelativeLayout) findViewById(R.id.relative_work_cert);
        mRelativeCheckCert = (RelativeLayout) findViewById(R.id.relative_check_cert);
        mRelativeChangeRecord.setOnClickListener(this);
        mRelativeCertInfo.setOnClickListener(this);
        mRelativeWorkCert.setOnClickListener(this);
        mRelativeCheckCert.setOnClickListener(this);
        findViewById(R.id.relative_basic_info).setOnClickListener(this);
        findViewById(R.id.relative_disciplinary_info).setOnClickListener(this);
        findViewById(R.id.relative_work_experience).setOnClickListener(this);
        findViewById(R.id.relative_training_record).setOnClickListener(this);
        findViewById(R.id.relative_assess_info).setOnClickListener(this);
    }

    @Override
    protected void initData(Bundle savedInstanceState) {
        result = (EmployListResult.EmployList) getIntent().getSerializableExtra("DATA");
        employType = getIntent().getStringExtra(Params.EMPLOY_TYPE);
        if (null != result) {
            mEmploymentName.setText(result.getName());
            mIdCode.setText(String.format(getString(R.string.item_id_code), result.getCardId()));
            mTheNo.setText("许可类型：" + result.getCertType());
            mEmploymentUnit.setText(String.format(getString(R.string.employment_unit), result.getUnitName()));
        }
        initViewVisible();
    }

    private void initViewVisible() {
        switch (employType) {
            case Constant.EmployType.EMPLOYMENT:
                mRelativeChangeRecord.setVisibility(View.GONE);
                mRelativeCertInfo.setVisibility(View.GONE);
                break;
            case Constant.EmployType.TEST:
                mRelativeWorkCert.setVisibility(View.GONE);
                mRelativeCheckCert.setVisibility(View.GONE);
                break;
            case Constant.EmployType.INSPECTOR:
                mRelativeWorkCert.setVisibility(View.GONE);
                mRelativeCheckCert.setVisibility(View.GONE);
                break;
            case Constant.EmployType.NONDESTRUCTIVE:
                mRelativeChangeRecord.setVisibility(View.GONE);
                mRelativeCertInfo.setVisibility(View.GONE);
                mRelativeCheckCert.setVisibility(View.GONE);
                break;
            default:
                break;
        }
    }

    @Override
    public void onClick(View v) {
        super.onClick(v);
        Intent intent = new Intent();
        Bundle bundle = new Bundle();
        bundle.putString("UUID", result.getUuid());
        switch (v.getId()) {
            case R.id.relative_basic_info:
                bundle.putString("INFO", Constant.Info.PERSON_DETAIL_INFO);
                intent.putExtras(bundle);
                intent.setClass(EmploymentDetailActivity.this, DetailActivity.class);
                startActivity(intent);
                break;
            case R.id.relative_disciplinary_info:
                bundle.putString("INFO", Constant.Info.PERSON_AWARD_INFO);
                intent.putExtras(bundle);
                intent.setClass(EmploymentDetailActivity.this, DetailActivity.class);
                startActivity(intent);
                break;
            case R.id.relative_work_experience:
                break;
            case R.id.relative_cert_info:
                break;
            case R.id.relative_work_cert:
                break;
            case R.id.relative_change_record:
                break;
            case R.id.relative_check_cert:
                break;
            case R.id.relative_training_record:
                break;
            case R.id.relative_assess_info:
                break;
            default:
                break;
        }
    }
}
